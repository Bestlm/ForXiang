<wxs module="util" src="../util.wxs" />
<!-- ä»…åœ¨éç™½è‰²å®¹å™¨é¡µé¢æ˜¾ç¤ºèƒŒæ™¯å›¾ç‰‡ -->
<view class="background-container" wx:if="{{!hideBackground}}">
  <image class="background-image" src="{{backgroundImage}}"></image>
</view>
<view class="container white" style="animation-name: animation-blur; animation-duration: 0.5s;">
  <image src="../../images/Mission.gif" mode='widthFix' />
  <view class="form-group" style="z-index: 0; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.05), 0 6px 20px 0 rgba(0, 0, 0, 0.05); ">
    <view class="form-cell">
      <view class="form-cell_title">ğŸ”–é€‰æ‹©é¢„è®¾</view>
      <picker mode="selector" bindchange="onPresetChange" value="{{presetIndex}}" range="{{presets}}" range-key="name">{{presets[presetIndex].name}}</picker>
    </view>
    <view class="form-cell">
      <view class="form-cell_title">ğŸ“Œä»»åŠ¡åç§°</view>
      <input class="form-cell_input" placeholder="ä»»åŠ¡åæ˜¯ä»€ä¹ˆ?" placeholder-class="form-cell_placeholder" bindinput="onTitleInput" value="{{title}}" />
    </view>
    <view class="form-cell">
      <view class="form-cell_title">ğŸ“ä»»åŠ¡è¯¦æƒ…</view>
      <textarea class="form-cell_input" placeholder="ä»»åŠ¡æ˜¯è¦åšä»€ä¹ˆå‘¢?" placeholder-class="form-cell_placeholder" bindinput="onDescInput" value="{{desc}}" />
    </view>
    <view class="form-cell">
      <view class="form-cell_title">ğŸ“é•¿æœŸä»»åŠ¡</view>
      <switch checked="{{isLongTerm}}" bindchange="onLongTermSwitch" />
    </view>
    <view class="form-cell" wx:if="{{isLongTerm}}">
      <view class="form-cell_title">ğŸ“…æŒç»­å¤©æ•°</view>
      <picker mode="selector" bindchange="onTotalDaysChange" value="{{totalDaysIndex}}" range="{{dayOptions}}" range-key="label">{{dayOptions[totalDaysIndex].label}}</picker>
    </view>
    <view class="form-cell" wx:if="{{isLongTerm && isCustomDays}}">
      <view class="form-cell_title">âœï¸è‡ªå®šä¹‰å¤©æ•°</view>
      <input class="form-cell_input" type="number" placeholder="è¾“å…¥å¤©æ•°" bindinput="onCustomDaysInput" value="{{customDays}}" />
    </view>
    <view class="form-cell" wx:if="{{isLongTerm && dailyCredit > 0}}">
      <view class="form-cell_title">ğŸ¯æ¯æ—¥ç§¯åˆ†</view>
      <view class="form-cell_input">{{dailyCredit}} ç§¯åˆ†/å¤©</view>
    </view>
    <view class="form-cell">
      <view class="form-cell_title">ğŸ’°{{isLongTerm ? 'æ€»' : ''}}ç§¯åˆ†å¥–åŠ±</view>
      <view class="slider-with-input">
        <slider class="custom-slider" min="0" max="{{isLongTerm ? maxCredit * totalDays : maxCredit}}" block-size="15" block-color="#353535" activeColor="#ff5794" bindchange="onCreditInput" value="{{credit}}"/>
        <view class="slider-value" bindtap="onSliderValueTap">{{credit}}</view>
      </view>
    </view>
  </view>

  <view class="footer">
    <view class="reset" bindtap="resetMission">é‡ç½®</view>
    <view class="save" bindtap="saveMission">ä¿å­˜</view>
  </view>
</view>